!function(){var e,t={664:function(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,c=[],_n=!0,s=!1;try{for(n=n.call(e);!(_n=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);_n=!0);}catch(e){s=!0,o=e}finally{try{_n||null==n.return||n.return()}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;function u(){}function l(){}l.resetWarningCache=u;var p,d,m=(p=function(e){e.exports=function(){function e(e,t,n,r,o,c){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==c){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:u};return n.PropTypes=n,n}()},p(d={exports:{}},d.exports),d.exports),f=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},h=function(e){return null!==e&&"object"===o(e)},y=function(e){return h(e)&&"function"==typeof e.then},v=function(e){return h(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment},E="[object Object]",C=function e(t,n){if(!h(t)||!h(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var o=Object.prototype.toString.call(t)===E;if(o!==(Object.prototype.toString.call(n)===E))return!1;if(!o&&!r)return t===n;var c=Object.keys(t),s=Object.keys(n);if(c.length!==s.length)return!1;for(var a={},i=0;i<c.length;i+=1)a[c[i]]=!0;for(var u=0;u<s.length;u+=1)a[s[u]]=!0;var l=Object.keys(a);if(l.length!==c.length)return!1;var p=t,d=n;return l.every((function(t){return e(p[t],d[t])}))},g=function(e,t,n){return h(e)?Object.keys(e).reduce((function(o,s){var a=!h(t)||!C(e[s],t[s]);return n.includes(s)?(a&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),o):a?r(r({},o||{}),{},c({},s,e[s])):o}),null):null},w="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;if(null===e||v(e))return e;throw new Error(t)},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;if(y(e))return{tag:"async",stripePromise:Promise.resolve(e).then((function(e){return b(e,t)}))};var n=b(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},S=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"2.4.0"}),e.registerAppInfo({name:"react-stripe-js",version:"2.4.0",url:"https://stripe.com/docs/stripe-js/react"}))},_=["on","session"],P=t.createContext(null);P.displayName="CustomCheckoutSdkContext";var x=function(e,t){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CustomCheckoutProvider> provider."));return e},O=t.createContext(null);O.displayName="CustomCheckoutContext";var j=function(e){var n=e.stripe,o=e.options,c=e.children,i=t.useMemo((function(){return k(n,"Invalid prop `stripe` supplied to `CustomCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")}),[n]),u=a(t.useState(null),2),l=u[0],p=u[1],d=a(t.useState((function(){return{stripe:"sync"===i.tag?i.stripe:null,customCheckoutSdk:null}})),2),m=d[0],y=d[1],v=function(e,t){y((function(n){return n.stripe&&n.customCheckoutSdk?n:{stripe:e,customCheckoutSdk:t}}))},E=t.useRef(!1);t.useEffect((function(){var e=!0;return"async"!==i.tag||m.stripe?"sync"===i.tag&&i.stripe&&!E.current&&(E.current=!0,i.stripe.initCustomCheckout(o).then((function(e){e&&(v(i.stripe,e),e.on("change",p))}))):i.stripePromise.then((function(t){t&&e&&!E.current&&(E.current=!0,t.initCustomCheckout(o).then((function(e){e&&(v(t,e),e.on("change",p))})))})),function(){e=!1}}),[i,m,o,p]);var g=f(n);t.useEffect((function(){null!==g&&g!==n&&console.warn("Unsupported prop change on CustomCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[g,n]);var w=f(o);t.useEffect((function(){var e,t;if(m.customCheckoutSdk){!o.clientSecret||h(w)||C(o.clientSecret,w.clientSecret)||console.warn("Unsupported prop change: options.client_secret is not a mutable property.");var n=null==w||null===(e=w.elementsOptions)||void 0===e?void 0:e.appearance,r=null==o||null===(t=o.elementsOptions)||void 0===t?void 0:t.appearance;r&&!C(r,n)&&m.customCheckoutSdk.changeAppearance(r)}}),[o,w,m.customCheckoutSdk]),t.useEffect((function(){S(m.stripe)}),[m.stripe]);var b=t.useMemo((function(){return e=m.customCheckoutSdk,t=l,e?(e.on,e.session,r(r({},s(e,_)),t||e.session())):null;var e,t}),[m.customCheckoutSdk,l]);return m.customCheckoutSdk?t.createElement(P.Provider,{value:m},t.createElement(O.Provider,{value:b},c)):null};j.propTypes={stripe:m.any,options:m.shape({clientSecret:m.string.isRequired,elementsOptions:m.object}).isRequired};var R=function(e){var n=t.useContext(P),r=t.useContext(N);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?x(n,e):A(r,e)},N=t.createContext(null);N.displayName="ElementsContext";var A=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},M=t.createContext(null);M.displayName="CartElementContext";var T=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},I=function(e){var n=e.stripe,r=e.options,o=e.children,c=t.useMemo((function(){return k(n)}),[n]),s=a(t.useState(null),2),i=s[0],u=s[1],l=a(t.useState(null),2),p=l[0],d=l[1],m=a(t.useState((function(){return{stripe:"sync"===c.tag?c.stripe:null,elements:"sync"===c.tag?c.stripe.elements(r):null}})),2),h=m[0],y=m[1];t.useEffect((function(){var e=!0,t=function(e){y((function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}}))};return"async"!==c.tag||h.stripe?"sync"!==c.tag||h.stripe||t(c.stripe):c.stripePromise.then((function(n){n&&e&&t(n)})),function(){e=!1}}),[c,h,r]);var v=f(n);t.useEffect((function(){null!==v&&v!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")}),[v,n]);var E=f(r);return t.useEffect((function(){if(h.elements){var e=g(r,E,["clientSecret","fonts"]);e&&h.elements.update(e)}}),[r,E,h.elements]),t.useEffect((function(){S(h.stripe)}),[h.stripe]),t.createElement(N.Provider,{value:h},t.createElement(M.Provider,{value:{cart:i,setCart:u,cartState:p,setCartState:d}},o))};I.propTypes={stripe:m.any,options:m.object};var B=function(e){var n=t.useContext(N);return A(n,e)},L={cart:null,cartState:null,setCart:function(){},setCartState:function(){}},U=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.useContext(M);return n?L:T(r,e)},D=function(e){return(0,e.children)(B("mounts <ElementsConsumer>"))};D.propTypes={children:m.func.isRequired};var F=function(e,n,r){var o=!!r,c=t.useRef(r);t.useEffect((function(){c.current=r}),[r]),t.useEffect((function(){if(!o||!e)return function(){};var t=function(){c.current&&c.current.apply(c,arguments)};return e.on(n,t),function(){e.off(n,t)}}),[o,n,e,c])},Y=function(e,n){var r,o="".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Element"),c=n?function(e){var n=R("mounts <".concat(o,">"));U("mounts <".concat(o,">"),"customCheckoutSdk"in n);var r=e.id,c=e.className;return t.createElement("div",{id:r,className:c})}:function(n){var r,c=n.id,s=n.className,i=n.options,u=void 0===i?{}:i,l=n.onBlur,p=n.onFocus,d=n.onReady,m=n.onChange,h=n.onEscape,y=n.onClick,v=n.onLoadError,E=n.onLoaderStart,C=n.onNetworksChange,w=n.onCheckout,b=n.onLineItemClick,k=n.onConfirm,S=n.onCancel,_=n.onShippingAddressChange,P=n.onShippingRateChange,x=R("mounts <".concat(o,">")),O="elements"in x?x.elements:null,j="customCheckoutSdk"in x?x.customCheckoutSdk:null,N=a(t.useState(null),2),A=N[0],M=N[1],T=t.useRef(null),I=t.useRef(null),B=U("mounts <".concat(o,">"),"customCheckoutSdk"in x),L=B.setCart,D=B.setCartState;F(A,"blur",l),F(A,"focus",p),F(A,"escape",h),F(A,"click",y),F(A,"loaderror",v),F(A,"loaderstart",E),F(A,"networkschange",C),F(A,"lineitemclick",b),F(A,"confirm",k),F(A,"cancel",S),F(A,"shippingaddresschange",_),F(A,"shippingratechange",P),"cart"===e?r=function(e){D(e),d&&d(e)}:d&&(r="expressCheckout"===e?d:function(){d(A)}),F(A,"ready",r),F(A,"change","cart"===e?function(e){D(e),m&&m(e)}:m),F(A,"checkout","cart"===e?function(e){D(e),w&&w(e)}:w),t.useLayoutEffect((function(){if(null===T.current&&null!==I.current&&(O||j)){var t=null;j?t=j.createElement(e,u):O&&(t=O.create(e,u)),"cart"===e&&L&&L(t),T.current=t,M(t),t&&t.mount(I.current)}}),[O,j,u,L]);var Y=f(u);return t.useEffect((function(){if(T.current){var e=g(u,Y,["paymentRequest"]);e&&T.current.update(e)}}),[u,Y]),t.useLayoutEffect((function(){return function(){if(T.current&&"function"==typeof T.current.destroy)try{T.current.destroy(),T.current=null}catch(e){}}}),[]),t.createElement("div",{id:c,className:s,ref:I})};return c.propTypes={id:m.string,className:m.string,onChange:m.func,onBlur:m.func,onFocus:m.func,onReady:m.func,onEscape:m.func,onClick:m.func,onLoadError:m.func,onLoaderStart:m.func,onNetworksChange:m.func,onCheckout:m.func,onLineItemClick:m.func,onConfirm:m.func,onCancel:m.func,onShippingAddressChange:m.func,onShippingRateChange:m.func,options:m.object},c.displayName=o,c.__elementType=e,c},q="undefined"==typeof window,W=t.createContext(null);W.displayName="EmbeddedCheckoutProviderContext";var V=function(){var e=t.useContext(W);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},$=q?function(e){var n=e.id,r=e.className;return V(),t.createElement("div",{id:n,className:r})}:function(e){var n=e.id,r=e.className,o=V().embeddedCheckout,c=t.useRef(!1),s=t.useRef(null);return t.useLayoutEffect((function(){return!c.current&&o&&null!==s.current&&(o.mount(s.current),c.current=!0),function(){if(c.current&&o)try{o.unmount(),c.current=!1}catch(e){}}}),[o]),t.createElement("div",{ref:s,id:n,className:r})},z=Y("auBankAccount",q),H=Y("card",q),J=Y("cardNumber",q),G=Y("cardExpiry",q),K=Y("cardCvc",q),Q=Y("fpxBank",q),X=Y("iban",q),Z=Y("idealBank",q),ee=Y("p24Bank",q),te=Y("epsBank",q),ne=Y("payment",q),re=Y("expressCheckout",q),oe=Y("paymentRequestButton",q),ce=Y("linkAuthentication",q),se=Y("address",q),ae=Y("shippingAddress",q),ie=Y("cart",q),ue=Y("paymentMethodMessaging",q),le=Y("affirmMessage",q),pe=Y("afterpayClearpayMessage",q);e.AddressElement=se,e.AffirmMessageElement=le,e.AfterpayClearpayMessageElement=pe,e.AuBankAccountElement=z,e.CardCvcElement=K,e.CardElement=H,e.CardExpiryElement=G,e.CardNumberElement=J,e.CartElement=ie,e.CustomCheckoutProvider=j,e.Elements=I,e.ElementsConsumer=D,e.EmbeddedCheckout=$,e.EmbeddedCheckoutProvider=function(e){var n=e.stripe,r=e.options,o=e.children,c=t.useMemo((function(){return k(n,"Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")}),[n]),s=t.useRef(null),i=t.useRef(null),u=a(t.useState({embeddedCheckout:null}),2),l=u[0],p=u[1];t.useEffect((function(){if(!i.current&&!s.current){var e=function(e){i.current||s.current||(i.current=e,s.current=i.current.initEmbeddedCheckout(r).then((function(e){p({embeddedCheckout:e})})))};"async"===c.tag&&!i.current&&r.clientSecret?c.stripePromise.then((function(t){t&&e(t)})):"sync"===c.tag&&!i.current&&r.clientSecret&&e(c.stripe)}}),[c,r,l,i]),t.useEffect((function(){return function(){l.embeddedCheckout?(s.current=null,l.embeddedCheckout.destroy()):s.current&&s.current.then((function(){s.current=null,l.embeddedCheckout&&l.embeddedCheckout.destroy()}))}}),[l.embeddedCheckout]),t.useEffect((function(){S(i)}),[i]);var d=f(n);t.useEffect((function(){null!==d&&d!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[d,n]);var m=f(r);return t.useEffect((function(){null!=m&&(null!=r?(null!=m.clientSecret&&r.clientSecret!==m.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=m.onComplete&&r.onComplete!==m.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))}),[m,r]),t.createElement(W.Provider,{value:l},o)},e.EpsBankElement=te,e.ExpressCheckoutElement=re,e.FpxBankElement=Q,e.IbanElement=X,e.IdealBankElement=Z,e.LinkAuthenticationElement=ce,e.P24BankElement=ee,e.PaymentElement=ne,e.PaymentMethodMessagingElement=ue,e.PaymentRequestButtonElement=oe,e.ShippingAddressElement=ae,e.useCartElement=function(){return U("calls useCartElement()").cart},e.useCartElementState=function(){return U("calls useCartElementState()").cartState},e.useCustomCheckout=function(){!function(e){var n=t.useContext(P);x(n,e)}("calls useCustomCheckout()");var e=t.useContext(O);if(!e)throw new Error("Could not find CustomCheckout Context; You need to wrap the part of your app that calls useCustomCheckout() in an <CustomCheckoutProvider> provider.");return e},e.useElements=function(){return B("calls useElements()").elements},e.useStripe=function(){return R("calls useStripe()").stripe},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(196))},773:function(e,t,n){"use strict";var r=window.wp.element,o=window.wc.wcBlocksRegistry,c=n(664),s="https://js.stripe.com/v3",a=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,i="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",u=null,l=function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"2.2.0",startTime:t})}(r,n),r},p=Promise.resolve().then((function(){return e=null,null!==u||(u=new Promise((function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&e&&console.warn(i),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(s,'"]')),t=0;t<e.length;t++){var n=e[t];if(a.test(n.src))return n}return null}();r&&e?console.warn(i):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(s).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(e){return void n(e)}else t(null)}))),u;var e})),d=!1;p.catch((function(e){d||console.warn(e)}));var m=window.wc.wcSettings,f=window.wp.i18n;const h="cpsw_stripe",y=e=>{var t;return(null===(t=(0,m.getSetting)("cpsw_stripe_data"))||void 0===t?void 0:t[e])||null},v="yes"===y("enable_saved_cards"),E="yes"===y("inline_cc"),C=(e,t)=>{const n=y("error_messages");return null!==(null==n?void 0:n[e])&&void 0!==(null==n?void 0:n[e])?n[e]:t},g=new Promise((e=>{(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d=!0;var r=Date.now();return p.then((function(e){return l(e,t,r)}))})(y("public_key"),{stripeAccount:y("account_id")}).then((t=>{e(t)})).catch((t=>{e({error:t})}))})),w=e=>{const t={name:`${e.first_name} ${e.last_name}`,address:{city:(null==e?void 0:e.city)||null,country:(null==e?void 0:e.country)||null,line1:(null==e?void 0:e.address_1)||null,line2:(null==e?void 0:e.address_2)||null,postal_code:(null==e?void 0:e.postcode)||null,state:(null==e?void 0:e.state)||null}};return null!=e&&e.phone&&(t.phone=e.phone),null!=e&&e.email&&(t.email=e.email),t},b=e=>({type:e.responseTypes.ERROR,message:C("processing_error",null),messageContext:e.noticeContexts.PAYMENTS}),k=e=>{let{text:t}=e;return t?(0,r.createElement)("div",{className:"cpsw-stripe-blocks-payment-methoddesc"},(0,r.createElement)("p",null,t)):null},S=e=>{let{errorCode:t,message:n=null}=e;if(!t)return null;let o=n;return n||(o=C(t,null),o||console.warn(`Error code ${t} is not present in the localized message. Please add it in the settings.`)),o?(0,r.createElement)("div",{className:"cpsw-validation-error"},(0,r.createElement)("p",null,o)):null},_={mastercard:(0,f.__)("MasterCard","checkout-plugins-stripe-woo"),visa:(0,f.__)("Visa","checkout-plugins-stripe-woo"),amex:(0,f.__)("American Express","checkout-plugins-stripe-woo"),discover:(0,f.__)("Discover","checkout-plugins-stripe-woo"),jcb:(0,f.__)("JCB","checkout-plugins-stripe-woo"),diners:(0,f.__)("Diners Club","checkout-plugins-stripe-woo"),unionpay:(0,f.__)("UnionPay","checkout-plugins-stripe-woo")},P=(e,t)=>{var n;const r=y("allowed_cards");if(null!=r&&r.length){if(!(r.indexOf(e)>-1)&&"unknown"!==e){const n=null!=_&&_[e]?_[e]:e,r=(0,f.sprintf)(// translators: %s - Type of card that is not allowed.
(0,f.__)("%s card type is not allowed","checkout-plugins-stripe-woo"),n),o={cc_card_type:r},c={...t.anyError};return t.setAnyError({...c,...o}),r}if(null!==(n=t.anyError)&&void 0!==n&&n.cc_card_type){const e={...t.anyError};delete e.cc_card_type,t.setAnyError({...e})}}},x={style:{base:{iconColor:"#666EE8",color:"#31325F",fontSize:"16px",lineHeight:1.375,"::placeholder":{color:"#fff"}}},classes:{focus:"focused",empty:"empty",invalid:"has-error"}},O=e=>{const[t,n]=(0,r.useState)(!1),[o,c]=(0,r.useState)({...x,...e}),[s,a]=(0,r.useState)("");return(0,r.useEffect)((()=>{const e=t?"#CFD7E0":"#fff";c((n=>{const r=void 0!==n.showIcon?{showIcon:t}:{};return{...n,style:{...n.style,base:{...n.style.base,"::placeholder":{color:e}}},...r}}))}),[t]),{options:o,onActive:(0,r.useCallback)((e=>{n(!e||(e=>!e))}),[n]),error:s,setError:a}},j=e=>{const[t,n]=(0,r.useState)({cardNumber:!0,cardExpiry:!0,cardCvc:!0}),o=O({showIcon:!0}),s=O({showIcon:!1}),a=O({showIcon:!1}),{options:i,onActive:u,error:l,setError:p}=o,{options:d,onActive:m,error:h,setError:y}=s,{options:v,onActive:E,error:C,setError:g}=a,w=(r,o)=>c=>{let s="";if("cardNumber"===o&&(s=P(c.brand,e),s))return r({code:"cc_card_type",message:s}),void n({...t,[o]:!1});c.error?r(c.error):r(""),n({...t,[o]:c.empty})};return(0,r.createElement)("div",{className:"cpsw-stripe-form-custom"},(0,r.createElement)("div",{className:"cpsw-cc-input-container cpsw-cc-number-element"},(0,r.createElement)(c.CardNumberElement,{onChange:w(p,"cardNumber"),options:i,className:"cpsw-cc-inputs",id:"cpsw-cc-number-element-id",onFocus:()=>u(t.cardNumber),onBlur:()=>u(t.cardNumber)}),(0,r.createElement)("label",{htmlFor:"cpsw-cc-number-element-id"},(0,f.__)("Card Number","checkout-plugins-stripe-woo")),(null==l?void 0:l.code)&&(0,r.createElement)(S,{errorCode:l.code,message:"cc_card_type"===l.code?l.message:null})),(0,r.createElement)("div",{className:"cpsw-cc-cvc-expiry-container"},(0,r.createElement)("div",{className:"cpsw-cc-input-container cpsw-cc-expiry-element"},(0,r.createElement)(c.CardExpiryElement,{id:"cpsw-cc-expiry-element-id",onChange:w(y,"cardExpiry"),options:d,className:"cpsw-cc-inputs",onFocus:()=>m(t.cardExpiry),onBlur:()=>m(t.cardExpiry)}),(0,r.createElement)("label",{htmlFor:"cpsw-cc-expiry-element-id"},(0,f.__)("Expiry Date","checkout-plugins-stripe-woo")),(null==h?void 0:h.code)&&(0,r.createElement)(S,{errorCode:h.code})),(0,r.createElement)("div",{className:"cpsw-cc-input-container cpsw-cc-cvc-element"},(0,r.createElement)(c.CardCvcElement,{id:"cpsw-cc-cvc-element-id",onChange:w(g,"cardCvc"),options:v,className:"cpsw-cc-inputs",onFocus:()=>E(t.cardCvc),onBlur:()=>E(t.cardCvc)}),(0,r.createElement)("label",{htmlFor:"cpsw-cc-cvc-element-id"},(0,f.__)("CVV/CVC","checkout-plugins-stripe-woo")),(null==C?void 0:C.code)&&(0,r.createElement)(S,{errorCode:C.code}))))};var R=e=>{var t;if(!E)return(0,r.createElement)(j,e);return(0,r.createElement)("div",{className:"cpsw-stripe-form"},(0,r.createElement)(c.CardElement,{onChange:t=>{P(t.brand,e)},options:{hidePostalCode:!0,style:{base:{color:"#32325d"}}}}),(null===(t=e.anyError)||void 0===t?void 0:t.cc_card_type)&&(0,r.createElement)(S,{errorCode:"cc_card_type",message:e.anyError.cc_card_type}))};class N extends Error{constructor(e){super(e.message),this.error=e}}const A=e=>{const{billing:t,shippingData:n,emitResponse:o,eventRegistration:s,activePaymentMethod:a,shouldSavePayment:i,anyError:u}=e,{onPaymentSetup:l}=s,p=(0,c.useStripe)(),d=(0,c.useElements)();return(e=>{let{billing:t,onPaymentSetup:n,emitResponse:o,activePaymentMethod:s,paymentType:a="card",getPaymentMethodArgs:i=(()=>({})),anyError:u}=e;const{billingData:l}=t,{responseTypes:p}=o,d=(0,c.useStripe)(),m=(0,r.useRef)(i);(0,r.useEffect)((()=>{m.current=i}),[i]);const f=(0,r.useCallback)((()=>({type:a,billing_details:w(l),...m.current()})),[l,a,i]);(0,r.useEffect)((()=>{const e=n((async()=>{if(s!==h)return null;if(Object.keys(u).length){let e="";for(const[t,n]of Object.entries(u))e+=n+"<br>";return{type:o.responseTypes.ERROR,message:e,messageContext:o.noticeContexts.PAYMENTS}}try{var e;const t=await d.createPaymentMethod(f());if(null!=t&&t.error)return{type:o.responseTypes.ERROR,message:C(t.error.code,t.error.message),messageContext:o.noticeContexts.PAYMENTS};const n=null==t||null===(e=t.paymentMethod)||void 0===e?void 0:e.id;if(!n)throw new N({message:C("processing_error",null)});return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:e.SUCCESS,...t}}(p,(e=>({meta:{paymentMethodData:{payment_method_created:e,payment_cc_nonce:y("stripe_cc_nonce")}}}))(n))}catch(e){throw new N({message:C("processing_error",null)})}}));return()=>e()}),[l,n,d,s,u])})({billing:t,shippingData:n,emitResponse:o,onPaymentSetup:l,shouldSavePayment:i,getPaymentMethodArgs:(0,r.useCallback)((()=>{const e=E?c.CardElement:c.CardNumberElement;return{card:null==d?void 0:d.getElement(e)}}),[p,d]),activePaymentMethod:a,anyError:u}),(e=>{let{eventRegistration:t,responseTypes:n,activePaymentMethod:o,shouldSavePayment:s=!1,emitResponse:a}=e;const i=(0,c.useStripe)(),{onCheckoutSuccess:u}=t;(0,r.useEffect)((()=>{const e=u((async e=>{var t,n,r,c;if(o!==h)return null;const s=null==e||null===(t=e.processingResponse)||void 0===t||null===(n=t.paymentDetails)||void 0===n?void 0:n.intent_secret,u=null==e||null===(r=e.processingResponse)||void 0===r||null===(c=r.paymentDetails)||void 0===c?void 0:c.verification_url;return s&&u?await i.confirmCardPayment(s,{}).then((e=>{var t,n;if(null!=e&&null!==(t=e.error)&&void 0!==t&&t.code){var r;let t=e.error.code;return"card_declined"===e.error.code&&null!=e&&null!==(r=e.error)&&void 0!==r&&r.decline_code&&(t=e.error.decline_code),{type:a.responseTypes.ERROR,message:C(t,e.error.message),messageContext:a.noticeContexts.PAYMENTS}}const o=null==e||null===(n=e.paymentIntent)||void 0===n?void 0:n.status;return!o||"succeeded"!==o&&"requires_capture"!==o?b(a):{type:a.responseTypes.SUCCESS,redirectUrl:u}})):b(a)}));return()=>{e()}}),[i,n,u,o,s])})({eventRegistration:s,responseTypes:o.responseTypes,activePaymentMethod:a,shouldSavePayment:i,emitResponse:o}),(0,r.createElement)("div",{className:"cpsw-stripe-card-container"},(0,r.createElement)(R,e),"test"===y("mode")&&(0,r.createElement)("div",{className:"cpsw-test-description"},(0,r.createElement)("b",null,(0,f.__)("Test Mode Enabled: ","checkout-plugins-stripe-woo")),(0,f.__)("Use demo card 4242424242424242 with any future date and CVV. ","checkout-plugins-stripe-woo"),(0,r.createElement)("br",null),(0,f.__)("Check more ","checkout-plugins-stripe-woo"),(0,r.createElement)("a",{href:"https://stripe.com/docs/testing",referrer:"noopener",target:"_blank",rel:"noreferrer"},(0,f.__)("demo cards","checkout-plugins-stripe-woo"))))},M=e=>{const[t,n]=(0,r.useState)(!1),[o,s]=(0,r.useState)({});if(e={...e,anyError:o,setAnyError:s},(0,r.useEffect)((()=>{g.catch((e=>{n(e)}))}),[]),t)throw new Error(t);return(0,r.createElement)(c.Elements,{stripe:g},(0,r.createElement)(A,e))},T=e=>{let{Component:t,...n}=e;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"cpsw-stripe-blocks-content"},(0,r.createElement)(k,{text:y("description")}),(0,r.createElement)(t,n)))};(0,o.registerPaymentMethod)({name:"cpsw_stripe",label:(0,r.createElement)((e=>{let{icons:t,...n}=e;const{PaymentMethodLabel:o,PaymentMethodIcons:c}=n.components;return(0,r.createElement)("span",{className:"cpsw-label-container cpsw_stripe"},(0,r.createElement)(o,{text:y("label")}),(0,r.createElement)(c,{icons:t,align:"left"}))}),{icons:y("icons")}),ariaLabel:(0,f.__)("Credit Card","checkout-plugins-stripe-woo"),canMakePayment:()=>g,content:(0,r.createElement)(T,{Component:M}),edit:(0,r.createElement)(T,{Component:M}),placeOrderButtonLabel:y("order_button_text"),supports:{showSavedCards:v,showSaveOption:v}})},196:function(e){"use strict";e.exports=window.React}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var c=n[e]={exports:{}};return t[e].call(c.exports,c,c.exports,r),c.exports}r.m=t,e=[],r.O=function(t,n,o,c){if(!n){var s=1/0;for(l=0;l<e.length;l++){n=e[l][0],o=e[l][1],c=e[l][2];for(var a=!0,i=0;i<n.length;i++)(!1&c||s>=c)&&Object.keys(r.O).every((function(e){return r.O[e](n[i])}))?n.splice(i--,1):(a=!1,c<s&&(s=c));if(a){e.splice(l--,1);var u=o();void 0!==u&&(t=u)}}return t}c=c||0;for(var l=e.length;l>0&&e[l-1][2]>c;l--)e[l]=e[l-1];e[l]=[n,o,c]},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={584:0,634:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,c,s=n[0],a=n[1],i=n[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(i)var l=i(r)}for(t&&t(n);u<s.length;u++)c=s[u],r.o(e,c)&&e[c]&&e[c][0](),e[s[u]]=0;return r.O(l)},n=self.webpackChunkcheckout_plugins_stripe_woo=self.webpackChunkcheckout_plugins_stripe_woo||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=r.O(void 0,[634],(function(){return r(773)}));o=r.O(o)}();